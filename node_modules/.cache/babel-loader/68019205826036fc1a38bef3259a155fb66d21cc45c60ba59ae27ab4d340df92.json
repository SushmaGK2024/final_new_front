{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams}from'react-router-dom';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ChangePassword=props=>{const{currrollno}=props;const history=useNavigate();useEffect(()=>{if(!currrollno){// Redirect to sign-in if currrollno is null\nhistory('/');}},[currrollno]);const curr_rollno=useParams();const rollno=curr_rollno.currrollno;console.log(\"currrollno in pass \",rollno);const[currentPassword,setCurrentPassword]=useState('');const[newPassword,setNewPassword]=useState('');const[confirmNewPassword,setConfirmNewPassword]=useState('');const[errorMessage,setErrorMessage]=useState('');const handleChangePassword=async()=>{if(newPassword!==confirmNewPassword){setErrorMessage('Passwords do not match');return;}const token=localStorage.getItem('token');const config={headers:{'Authorization':\"Bearer \".concat(token)}};const data={currentPassword,newPassword};try{const response=await axios.post(\"https://backendf-fx8p.onrender.com/users/change-password/\".concat(rollno),data,config);console.log(\"Response:\",response.data);alert(\"Password changed successfully!\");}catch(error){console.error('Error changing password:',error);setErrorMessage('Error changing password. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"change-pass-container\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{display:\"flex\",justifyContent:\"center\"},children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:currentPassword,onChange:e=>setCurrentPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:newPassword,onChange:e=>setNewPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:confirmNewPassword,onChange:e=>setConfirmNewPassword(e.target.value)})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{onClick:handleChangePassword,style:{marginTop:\"20px\"},children:\"Change Password\"}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .change-pass-container {\\n          background : azure ;\\n          padding : 3% ;\\n          border-radius : 0.4rem;\\n          width : 40%;\\n          margin-left:30%;\\n          margin-bottom : 20px;\\n        }\\n          @media (max-width: 768px) {\\n            .form-group label {\\n              display: block;\\n              margin-bottom: 5px;\\n            }\\n            .form-input {\\n              width: 100%;\\n            }\\n            .form-button {\\n              width: 100%;\\n            }\\n            .change-pass-container {\\n              background : azure ;\\n              padding : 3% ;\\n              border-radius : 0.4rem;\\n              width : 80%;\\n              margin-left:10%;\\n              margin-right : 10%;\\n              margin-bottom : 20px;\\n            }\\n          }\\n        \"})]});};export default ChangePassword;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","ChangePassword","props","currrollno","history","curr_rollno","rollno","console","log","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmNewPassword","setConfirmNewPassword","errorMessage","setErrorMessage","handleChangePassword","token","localStorage","getItem","config","headers","concat","data","response","post","alert","error","className","children","style","display","justifyContent","paddingTop","type","value","onChange","e","target","color","onClick","marginTop"],"sources":["C:/Users/sushm/OneDrive/Desktop/Git uploads/final_new_front/src/components/ChangePassword.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nconst ChangePassword = (props) => {\r\n  const {currrollno}=props;\r\n  const history = useNavigate();\r\n  useEffect(() => {\r\n    if (!currrollno) {\r\n      // Redirect to sign-in if currrollno is null\r\n      history('/');\r\n    }\r\n  }, [currrollno]);\r\n   const curr_rollno=useParams()\r\n   const rollno =curr_rollno.currrollno;\r\n   console.log(\"currrollno in pass \",rollno)\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmNewPassword, setConfirmNewPassword] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const handleChangePassword = async () => {\r\n    if (newPassword !== confirmNewPassword) {\r\n      setErrorMessage('Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    const config = {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    };\r\n\r\n    const data = {\r\n      currentPassword,\r\n      newPassword\r\n    };\r\n\r\n    try {\r\n      const response = await axios.post(`https://backendf-fx8p.onrender.com/users/change-password/${rollno}`, data, config);\r\n      console.log(\"Response:\", response.data);\r\n      alert(\"Password changed successfully!\");\r\n    } catch (error) {\r\n      console.error('Error changing password:', error);\r\n      setErrorMessage('Error changing password. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='change-pass-container' >\r\n      <h2 style={{display:\"flex\", justifyContent:\"center\"}}>Change Password</h2>\r\n      <div style={{paddingTop:\"20px\"}}>\r\n        <label>Current Password:</label>\r\n        <input\r\n          type=\"password\"\r\n          value={currentPassword}\r\n          onChange={(e) => setCurrentPassword(e.target.value)}\r\n        />\r\n      </div>\r\n      <div style={{paddingTop:\"20px\"}}>\r\n        <label>New Password:</label>\r\n        <input\r\n          type=\"password\"\r\n          value={newPassword}\r\n          onChange={(e) => setNewPassword(e.target.value)}\r\n        />\r\n      </div>\r\n      <div style={{paddingTop:\"20px\"}}>\r\n        <label>Confirm New Password:</label>\r\n        <input\r\n          type=\"password\"\r\n          value={confirmNewPassword}\r\n          onChange={(e) => setConfirmNewPassword(e.target.value)}\r\n        />\r\n      </div>\r\n      {errorMessage && <p style={{ color: 'red' }}>{errorMessage}</p>}\r\n      <button onClick={handleChangePassword} style={{marginTop:\"20px\"}}>Change Password</button>\r\n      <style>\r\n        {`\r\n        .change-pass-container {\r\n          background : azure ;\r\n          padding : 3% ;\r\n          border-radius : 0.4rem;\r\n          width : 40%;\r\n          margin-left:30%;\r\n          margin-bottom : 20px;\r\n        }\r\n          @media (max-width: 768px) {\r\n            .form-group label {\r\n              display: block;\r\n              margin-bottom: 5px;\r\n            }\r\n            .form-input {\r\n              width: 100%;\r\n            }\r\n            .form-button {\r\n              width: 100%;\r\n            }\r\n            .change-pass-container {\r\n              background : azure ;\r\n              padding : 3% ;\r\n              border-radius : 0.4rem;\r\n              width : 80%;\r\n              margin-left:10%;\r\n              margin-right : 10%;\r\n              margin-bottom : 20px;\r\n            }\r\n          }\r\n        `}\r\n      </style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}