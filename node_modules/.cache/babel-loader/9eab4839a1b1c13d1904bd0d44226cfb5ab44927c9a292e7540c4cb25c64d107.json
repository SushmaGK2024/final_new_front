{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams}from'react-router-dom';import'./EditProfile.css';// Importing CSS file\nimport{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EditProfile=props=>{const{currrollno}=props;const history=useNavigate();useEffect(()=>{if(!currrollno){// Redirect to sign-in if currrollno is null\nhistory('/');}},[currrollno]);const[profile,setProfile]=useState({});const[name,setName]=useState('');const[degree,setDegree]=useState('');const[major,setMajor]=useState('');const[batch,setBatch]=useState('');const[cgpa,setCgpa]=useState('');const{id}=useParams();const rollno=id;console.log(\"rollno : \",id);const token=localStorage.getItem('token');useEffect(()=>{const fetchProfile=async()=>{try{const response=await axios.get(\"https://backendf-fx8p.onrender.com/users/profile/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});console.log(\"user data : \",response.data);setProfile(response.data);setName(response.data.full_name);setDegree(response.data.degree);setMajor(response.data.major);setBatch(response.data.batch);setCgpa(response.data.cgpa);}catch(error){console.error('Error fetching profile:',error);}};fetchProfile();},[id,token]);const handleSaveChanges=async e=>{e.preventDefault();const config={headers:{'Authorization':\"Bearer \".concat(token)}};const updatedData={full_name:name,degree:degree,major:major,batch:batch,cgpa:cgpa};console.log(\"updated data : \",updatedData);try{const response=await axios.put(\"https://backendf-fx8p.onrender.com/users/profile/\".concat(id),updatedData,config);console.log(\"Response:\",response.data);alert(\"Updates are saved successfully!!\");}catch(error){console.error('Error updating profile:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"edit-profile-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"edit-profile-title\",children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveChanges,className:\"edit-profile-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Roll No:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form-text\",children:rollno})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Degree:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:degree,onChange:e=>setDegree(e.target.value),className:\"form-input-degree\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Major:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:major,onChange:e=>setMajor(e.target.value),className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Batch:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:batch,onChange:e=>setBatch(e.target.value),className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CGPA:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:cgpa,onChange:e=>setCgpa(e.target.value),className:\"form-input\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-button\",children:\"Save Changes\"})]})]});};export default EditProfile;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","EditProfile","props","currrollno","history","profile","setProfile","name","setName","degree","setDegree","major","setMajor","batch","setBatch","cgpa","setCgpa","id","rollno","console","log","token","localStorage","getItem","fetchProfile","response","get","concat","headers","Authorization","data","full_name","error","handleSaveChanges","e","preventDefault","config","updatedData","put","alert","className","children","onSubmit","type","value","onChange","target"],"sources":["C:/Users/sushm/OneDrive/Desktop/Git uploads/final_new_front/src/components/EditProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport './EditProfile.css';  // Importing CSS file\r\nimport { useNavigate } from 'react-router-dom';\r\nconst EditProfile = (props) => {\r\n  const {currrollno}=props;\r\n  const history = useNavigate();\r\n  useEffect(() => {\r\n    if (!currrollno) {\r\n      // Redirect to sign-in if currrollno is null\r\n      history('/');\r\n    }\r\n  }, [currrollno]);\r\n  const [profile, setProfile] = useState({});\r\n  const [name, setName] = useState('');\r\n  const [degree, setDegree] = useState('');\r\n  const [major, setMajor] = useState('');\r\n  const [batch, setBatch] = useState('');\r\n  const [cgpa, setCgpa] = useState('');\r\n  const { id } = useParams();\r\n  const rollno= id;\r\n  console.log(\"rollno : \", id)\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const response = await axios.get(`https://backendf-fx8p.onrender.com/users/profile/${id}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        console.log(\"user data : \", response.data)\r\n        setProfile(response.data);\r\n        setName(response.data.full_name);\r\n        setDegree(response.data.degree);\r\n        setMajor(response.data.major);\r\n        setBatch(response.data.batch);\r\n        setCgpa(response.data.cgpa);\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, [id, token]);\r\n\r\n  const handleSaveChanges = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    const config = {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    };\r\n \r\n    const updatedData = {\r\n      full_name: name,\r\n      degree: degree,\r\n      major: major,\r\n      batch: batch,\r\n      cgpa: cgpa\r\n    };\r\n    console.log(\"updated data : \", updatedData)\r\n    try {\r\n      const response = await axios.put(`https://backendf-fx8p.onrender.com/users/profile/${id}`, updatedData, config);\r\n      console.log(\"Response:\", response.data);\r\n      alert(\"Updates are saved successfully!!\");\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"edit-profile-container\">\r\n      <h2 className=\"edit-profile-title\">Edit Profile</h2>\r\n      <form onSubmit={handleSaveChanges} className=\"edit-profile-form\">\r\n        <div className=\"form-group\">\r\n          <label>Roll No:</label>\r\n          <span className=\"form-text\">{rollno}</span>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Name:</label>\r\n          <input \r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"form-input\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Degree:</label>\r\n          <input \r\n            type=\"text\"\r\n            value={degree}\r\n            onChange={(e) => setDegree(e.target.value)}\r\n            className=\"form-input-degree\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Major:</label>\r\n          <input \r\n            type=\"text\"\r\n            value={major}\r\n            onChange={(e) => setMajor(e.target.value)}\r\n            className=\"form-input\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Batch:</label>\r\n          <input \r\n            type=\"text\"\r\n            value={batch}\r\n            onChange={(e) => setBatch(e.target.value)}\r\n            className=\"form-input\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>CGPA:</label>\r\n          <input \r\n            type=\"text\"\r\n            value={cgpa}\r\n            onChange={(e) => setCgpa(e.target.value)}\r\n            className=\"form-input\"\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"form-button\">Save Changes</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}