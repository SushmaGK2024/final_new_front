{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const SignIn=_ref=>{let{setcurrrollno}=_ref;const[isSignIn,setIsSignIn]=useState(true);// State to toggle between sign-in and sign-up\nconst[rollNo,setRollNo]=useState('');const[password,setPassword]=useState('');const history=useNavigate();const handleSignIn=async()=>{// Perform API call to authenticate user\n// Use the entered rollNo and password\nconsole.log(\"Signing in\");try{const response=await fetch('https://backendf-fx8p.onrender.com/users/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({rollNo,password})});const data=await response.json();console.log(data);if(response.ok){console.log(\"Success\");// Authentication successful, redirect to home page\nsetcurrrollno(rollNo);history('/home');const token=data.token;const userId=data.userId;localStorage.setItem('token',token);localStorage.setItem('userId',userId);console.log(\"Token signin: \",localStorage.getItem('token'));}else{// Authentication failed, handle error\nconsole.error('Authentication failed:',data);}}catch(error){console.error('Error during sign-in:',error);}};const[email,setEmail]=useState('');const[rollnoup,setRollnoup]=useState('');const[passwordup,setPasswordup]=useState('');const[message,setMessage]=useState('');const handleSignup=async e=>{e.preventDefault();try{const response=await axios.post('https://backendf-fx8p.onrender.com/users/signup',{email:email,rollno:rollnoup,password:passwordup});setMessage(response.data.message);}catch(error){setMessage(error.response.data.message);}};return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",paddingTop:\"50px\",paddingRight:\"80px\",justifyContent:\"center\",alignItems:\"center\",height:\"65vh\",marginBottom:\"10%\"},children:isSignIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Roll No:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:rollNo,onChange:e=>setRollNo(e.target.value)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignIn,children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSignIn(false),children:\"Sign Up\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"30%\"},children:/*#__PURE__*/ /* Add input fields and other necessary elements for signup */_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Roll Number\",value:rollnoup,onChange:e=>setRollnoup(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:passwordup,onChange:e=>setPasswordup(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignup,children:\"Sign Up\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSignIn(true),children:\"Sign In\"})]})]})});};export default SignIn;","map":{"version":3,"names":["React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SignIn","_ref","setcurrrollno","isSignIn","setIsSignIn","rollNo","setRollNo","password","setPassword","history","handleSignIn","console","log","response","fetch","method","headers","body","JSON","stringify","data","json","ok","token","userId","localStorage","setItem","getItem","error","email","setEmail","rollnoup","setRollnoup","passwordup","setPasswordup","message","setMessage","handleSignup","e","preventDefault","post","rollno","style","display","flexDirection","paddingTop","paddingRight","justifyContent","alignItems","height","marginBottom","children","type","value","onChange","target","onClick","width","onSubmit","placeholder","required"],"sources":["C:/Users/sushm/OneDrive/Desktop/Git uploads/final_new_front/src/components/SignIn.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\nconst SignIn = ({ setcurrrollno }) => {\r\n  const [isSignIn, setIsSignIn] = useState(true); // State to toggle between sign-in and sign-up\r\n  const [rollNo, setRollNo] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const history = useNavigate();\r\n\r\n  const handleSignIn = async () => {\r\n    // Perform API call to authenticate user\r\n    // Use the entered rollNo and password\r\n    console.log(\"Signing in\");\r\n    try {\r\n      const response = await fetch('https://backendf-fx8p.onrender.com/users/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          rollNo,\r\n          password,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      console.log(data);\r\n      if (response.ok) {\r\n        console.log(\"Success\");\r\n        // Authentication successful, redirect to home page\r\n        setcurrrollno(rollNo);\r\n        history('/home');\r\n        const token = data.token;\r\n        const userId = data.userId;\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('userId', userId);\r\n        console.log(\"Token signin: \", localStorage.getItem('token'));\r\n      } else {\r\n        // Authentication failed, handle error\r\n        console.error('Authentication failed:', data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error during sign-in:', error);\r\n    }\r\n  };\r\n\r\n\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [rollnoup, setRollnoup] = useState('');\r\n    const [passwordup, setPasswordup] = useState('');\r\n    const [message, setMessage] = useState('');\r\n  \r\n    const handleSignup = async (e) => {\r\n      e.preventDefault();\r\n      try {\r\n        const response = await axios.post('https://backendf-fx8p.onrender.com/users/signup', {\r\n          email : email,\r\n          rollno :rollnoup,\r\n          password: passwordup\r\n        });\r\n        setMessage(response.data.message);\r\n      } catch (error) {\r\n        setMessage(error.response.data.message);\r\n      }\r\n    };\r\n  \r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"column\", paddingTop: \"50px\", paddingRight: \"80px\", justifyContent: \"center\", alignItems: \"center\", height: \"65vh\", marginBottom: \"10%\" }}>\r\n      {isSignIn ? (\r\n        <>\r\n          <h2>Sign In</h2>\r\n          <div>\r\n            <label>\r\n              Roll No:\r\n              <input type=\"text\" value={rollNo} onChange={(e) => setRollNo(e.target.value)} />\r\n            </label>\r\n            <br />\r\n            <label>\r\n              Password:\r\n              <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n            </label>\r\n            <br />\r\n            <button onClick={handleSignIn}>Sign In</button>\r\n          </div>\r\n          <br/>\r\n          <p>Don't have an account? <button onClick={() => setIsSignIn(false)}>Sign Up</button></p>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <h2>Sign Up</h2>\r\n          <div style={{width : \"30%\"}}>\r\n            {/* Add input fields and other necessary elements for signup */\r\n             <div>\r\n             \r\n             <form onSubmit={handleSignup}>\r\n               <input\r\n                 type=\"email\"\r\n                 placeholder=\"Email\"\r\n                 value={email}\r\n                 onChange={(e) => setEmail(e.target.value)}\r\n                 required\r\n               />\r\n               <input\r\n                 type=\"text\"\r\n                 placeholder=\"Roll Number\"\r\n                 value={rollnoup}\r\n                 onChange={(e) => setRollnoup(e.target.value)}\r\n                 required\r\n               />\r\n               <input\r\n                 type=\"password\"\r\n                 placeholder=\"Password\"\r\n                 value={passwordup}\r\n                 onChange={(e) => setPasswordup(e.target.value)}\r\n                 required\r\n               />\r\n                  <button onClick={handleSignup}>Sign Up</button>\r\n             </form>\r\n             {message && <p>{message}</p>}\r\n           </div>}\r\n        \r\n          </div>\r\n          <p>Already have an account? <button onClick={() => setIsSignIn(true)}>Sign In</button></p>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}